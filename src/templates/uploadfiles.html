<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WMLiB</title>

    <!-- WM CSS Lib -->
    <link href="../css/wmcsslib.css" rel="stylesheet">
    <!-- Jasny Bootstrap for uploadfiles -->
    <link href="../css/jasny-bootstrap.min.css" rel="stylesheet" media="screen">
    
    <link rel="stylesheet" href="../css/mfileupload/jquery.fileupload.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  	<div id="wrapper" class="page-wrap">
  	<header>
  		<div class="js-include" title="nav.html" data-class="js"></div>	
  	</header> 
  	<div id="page-content-wrapper">
	  	<div class="container">
	  		<div class="bradcrumb mtl">
	  			<ol class="breadcrumb">
				  <li><a href="home.html"><i class="fa fa-home"></i> Home</a></li>
				  <li><a href="js_widgets.html">Javascript widgets</a></li>
				  <li class="active">UploadFiles</li>
				</ol>
	  		</div>
	  		<h1>UploadFiles</h1>
	  		<hr>
	  		
	  		<div class="row">
	  			<div class="col-sm-12">
	  				<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Basic example</h3>
						</div>
						<div class="panel-body">
							<div class="fileinput fileinput-new input-group" data-provides="fileinput">
							  <div class="form-control" data-trigger="fileinput"><i class="glyphicon glyphicon-file fileinput-exists"></i> <span class="fileinput-filename"></span></div>
							  <span class="input-group-addon btn btn-default btn-file"><span class="fileinput-new">Select file</span><span class="fileinput-exists">Change</span><input type="file" name="..."></span>
							  <a href="#" class="input-group-addon btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
							</div>
							<hr>
							<div class="fileinput fileinput-new" data-provides="fileinput">
							  <span class="btn btn-default btn-file"><span class="fileinput-new">Select file</span><span class="fileinput-exists">Change</span><input type="file" name="..."></span>
							  <span class="fileinput-filename"></span>
							  <a href="#" class="close fileinput-exists" data-dismiss="fileinput" style="float: none">&times;</a>
							</div>
						</div>
					</div>
	  			</div>
	  		</div>
			<div class="row">
	  			<div class="col-sm-12">
	  				<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Image upload widgets</h3>
						</div>
						<div class="panel-body">
							<div class="fileinput fileinput-new" data-provides="fileinput">
							  <div class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 200px; height: 150px;"></div>
							  <div>
							    <span class="btn btn-default btn-file"><span class="fileinput-new">Select image</span><span class="fileinput-exists">Change</span><input type="file" name="..."></span>
							    <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
							  </div>
							</div>
							<hr>
							<div class="fileinput fileinput-new" data-provides="fileinput">
							  <div class="fileinput-new thumbnail" style="width: 200px; height: 150px;">
							    <img data-src="holder.js/100%x100%" alt="...">
							  </div>
							  <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>
							  <div>
							    <span class="btn btn-default btn-file"><span class="fileinput-new">Select image</span><span class="fileinput-exists">Change</span><input type="file" name="..."></span>
							    <a href="#" class="btn btn-default fileinput-exists" data-dismiss="fileinput">Remove</a>
							  </div>
							</div>
						</div>
					</div>
	  			</div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<h3 class="panel-title">Multiple file upload</h3>
						</div>
						<div class="panel-body">
							<div class="row">
								<div class="col-sm-12">
									<span class="btn btn-default fileinput-button">
					                    <i class="glyphicon glyphicon-plus"></i>
					                    <span>Escoger fotos</span>
					                    <input name="upload[]" type="file" multiple="multiple" id="files" />
					                </span>
					                <button type="submit" class="btn btn-success"><i class="glyphicon glyphicon-upload"></i> Subir fotos</button>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-12">
									<!-- The global progress state -->
						            <div class="fileupload-progress fade">
						                <!-- The global progress bar -->
						                <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
						                    <div class="progress-bar progress-bar-success" style="width:0%;"></div>
						                </div>
						                <!-- The extended global progress state -->
						                <div class="progress-extended">&nbsp;</div>
						            </div>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-12">
						            <div class="browse">
							        	<div class="table-responsive">
									        <table class="table table-bordered table-striped table-responsive">
									        	<thead>
									        		<tr>
									        			<th>Imagen</th>
									        			<th>Datos imagen</th>
									        		</tr>
									        	</thead>
									        	<tbody id="list-miniatura">
									        	
									        	</tbody>
									        </table>
							        	</div>
							        </div>
								</div>
							</div>
						</div>
					</div>
	  			</div>
	  		</div>
	  		<div class="row">
	  			<div class="col-sm-12 mbl">
	  				<div class="more-info">
						<a href="http://jasny.github.io/bootstrap/javascript/#fileinput" class="btn btn-link">uploadFiles more info here</a>
					</div>
					<div class="back-home mbm">
						<a href="home.html" class="btn btn-icon"><i class="fa fa-chevron-circle-left"></i> back to home</a>
					</div>
	  			</div>
	  		</div>
	  	</div>
  	</div>
  	
  	</div>
    <!-- /#wrapper -->
    <footer class="site-footer toggle">
  		<div class="container">
  			<p class="text-muted text-center mtl">&copy; WhiteMind - <a href="http://www.whitemind.es" target="_blank">www.whitemind.es</a> - <a href="http://www.wmhome.es" target="_blank">www.wmhome.es</a></p>
  		</div>
  	</footer>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../js/bootstrap.min.js"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=css"></script>

	<!-- Jasny bootstrap for uploadfiles -->
	<script src="../js/components/jasny/jasny-bootstrap.min.js"></script>
	<!-- Images holder -->
	<script src="../js/components/holder/holder.js"></script>
    <script>
		function handleFileSelect(evt) {
			var files = evt.target.files; // FileList object
			
			// Loop through the FileList and render image files as thumbnails.
			for (var i = 0, f; f = files[i]; i++) {
			
			  // Only process image files.
			  if (!f.type.match('image.*')) {
			    continue;
			  }
			
			  var reader = new FileReader();
			
			  // Closure to capture the file information.
			  reader.onload = (function(theFile) {
			    return function(e) {
			      // Render thumbnail.
			      var span = document.createElement('tr');
			      span.innerHTML = ['<td><img class="thumb" src="', e.target.result,'" title="', escape(theFile.name), '"/></td><td>Name: ', escape(theFile.name), ' || Size: ', escape(theFile.size), ' bytes || type: ', escape(theFile.type), '</td>'].join('');
			      document.getElementById('list-miniatura').insertBefore(span, null);
			    };
			  })(f);
			
			  // Read in the image file as a data URL.
			  reader.readAsDataURL(f);
			}
		}
		function UpdatePreviewCanvas()
		{
		    var img = this;
		    var canvas = document.getElementById( 'list-miniatura' );
		
		    if( typeof canvas === "undefined" 
		        || typeof canvas.getContext === "undefined" )
		        return;
		
		    var context = canvas.getContext( '2d' );
		
		    var world = new Object();
		    world.width = canvas.offsetWidth;
		    world.height = canvas.offsetHeight;
		
		    canvas.width = world.width;
		    canvas.height = world.height;
		
		    if( typeof img === "undefined" )
		        return;
		
		    var WidthDif = img.width - world.width;
		    var HeightDif = img.height - world.height;
		
		    var Scale = 0.0;
		    if( WidthDif > HeightDif )
		    {
		        Scale = world.width / img.width;
		    }
		    else
		    {
		        Scale = world.height / img.height;
		    }
		    if( Scale > 1 )
		        Scale = 1;
		
		    var UseWidth = Math.floor( img.width * Scale );
		    var UseHeight = Math.floor( img.height * Scale );
		
		    var x = Math.floor( ( world.width - UseWidth ) / 2 );
		    var y = Math.floor( ( world.height - UseHeight ) / 2 );
		
		    context.drawImage( img, x, y, UseWidth, UseHeight );  
		}
		document.getElementById('files').addEventListener('change', handleFileSelect, false);
	</script>
	<script>
    //Script to include files and components
    $(".js-include").each(function(){
	    var inc=$(this);
	    $.get(inc.attr("title"), function(data){
	        inc.replaceWith(data);
	    });
	});
    </script>
    </body>
</html>